set -g default-terminal "xterm-256color"

# unbind default prefix and set it to Ctrl+a
unbind C-b
set -g prefix C-s
bind C-s send-prefix

# act like vim
setw -g mode-keys vi
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
# more settings to make copy-mode more vim-like
unbind p
bind p paste-buffer
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection

# split window
bind v split-window -h -c "#{pane_current_path}"
# bind h split-window -h

# vim Esc is slow, enable this
set -sg escape-time 10

# WARNING: `focus-events` is not enabled. |'autoread'| may not work.
set-option -g focus-events on

# true color
set -ga terminal-overrides ",xterm-256color:RGB"

# no login shell
set -g default-command "${SHELL}"

# long long long history
set -g history-limit 50000

# mouse
set -g mouse on
# bind -t vi-copy    WheelUpPane   halfpage-up
 # bind -t vi-copy    WheelDownPane halfpage-down

# window notifications
set-window-option -g monitor-activity on
set-option -g visual-activity on

# start window numbers at 1 to match keyboard order with tmux window order
set -g base-index 1
set-window-option -g pane-base-index 1

# renumber windows sequentially after closing any of them
set -g renumber-windows on

# Rename window to reflect current program
set-option -g -w automatic-rename on

# reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# move status bar to top
# set-option -g status-position top

##############################
### Color & Style Settings ###
##############################

# Set title, which is also showed at iTerm tab
# For special character sequences such as #S, refer to manual
set-option -g set-titles on
set-option -g set-titles-string '#S #I:#W (#h)' # session name, window index, window title, hostname

# Status Bar: auto-generated by tmuxline.vim
set -g status-justify "left"
set -g status "on"
set -g status-left-style "none"
set -g message-command-style "fg=colour231,bg=colour31"
set -g status-right-style "none"
#set -g status-utf8 "on"
set -g status-style "bg=colour234,none"
set -g message-style "fg=colour231,bg=colour31"
set -g pane-border-style "fg=colour240"
set -g status-right-length "100"
set -g status-left-length "100"

TMUX_STATUS_BG="colour$PROMPT_HOST_COLOR"

# Reference: http://man7.org/linux/man-pages/man1/tmux.1.html#FORMATS
# Reference: https://upload.wikimedia.org/wikipedia/commons/1/15/Xterm_256color_chart.svg
setw -g window-status-activity-style "none"
setw -g window-status-activity-style "fg=colour250,bg=colour234,underscore"
setw -g window-status-separator ""
setw -g window-status-style "fg=colour250,bg=colour234,none"
# [left status] session name (#S), hostname (#h)
set -g status-left "#[fg=colour16,bg=$TMUX_STATUS_BG,bold] #S #[fg=colour234,bg=$TMUX_STATUS_BG,nobold,nounderscore,noitalics]#[fg=$TMUX_STATUS_BG,bg=colour234] #h "
# [right status] datetime, etc.
set -g status-right "#{prefix_highlight}#[fg=colour236,bg=colour234,nobold,nounderscore,noitalics]#[fg=colour247,bg=colour236] %Y-%m-%d  %H:%M #[fg=colour252,bg=colour236,nobold,nounderscore,noitalics]"
# [window] number (#I), window flag (#F) such as Marked or Zoomed. If marked (i.e. #F contains 'M'), highlight it.
setw -g window-status-format "#[fg=colour31,bg=colour234] #I#F#[fg=colour250,bg=colour234] #{?#{m:*M*,#F},#[fg=colour233]#[bg=colour71],}#W#[bg=colour234] "
# [active window] similar, but use blue-ish color. If panes are synchronized, display the information.
setw -g window-status-current-format "#[fg=colour234,bg=colour31,nobold,nounderscore,noitalics]#[fg=colour87,bg=colour31] #I#F#[fg=colour231,bg=colour31,bold] #W #{?pane_synchronized,#[fg=colour190](SYNC),} #[fg=colour31,bg=colour234,nobold,nounderscore,noitalics]"

# window modes color (e.g. choosing window: <prefix>w / escape mode)
setw -g mode-style bg=colour31,fg=white

# pane border colors
set-option -g pane-border-style fg=colour240,bg=default   # inactive pane border: gray
set-option -g pane-active-border-style fg=green,bg=default  # active pane border: green
